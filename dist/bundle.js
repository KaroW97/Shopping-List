/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/*!*************************!*\
  !*** ./src/js/index.js ***!
  \*************************/
eval("console.log('jestem');\n\nvar createElement = function createElement(element) {\n  return document.createElement(element);\n};\n\nvar appendChild = function appendChild(parent, element) {\n  return parent.appendChild(element);\n};\n\nvar querySelector = function querySelector(element) {\n  return document.querySelector(element);\n};\n\nvar getElementById = function getElementById(element) {\n  return document.getElementById(element);\n};\n\nvar setListLength = function setListLength(length) {\n  var list_length = getElementById('list-length');\n  list_length.innerText = \"d\\u0142ugo\\u015B\\u0107 listy:\".concat(length);\n};\n\nvar filterData = function filterData(clicked) {\n  //filter data if there is a mach return if == 'wszystko' return whole list\n  var newList;\n  fetch('/list').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    var list = data;\n    clicked.toLowerCase() !== 'wszystko' ? newList = list.list.filter(function (product) {\n      return product.product_select.toLowerCase() === clicked.toLowerCase();\n    }) : newList = list.list;\n    loadData('shopping-list', newList);\n  });\n};\n\nvar deteltePost = function deteltePost(id) {\n  'use strict';\n\n  var httpreq = new XMLHttpRequest();\n  httpreq.open('DELETE', '/delete-post');\n  httpreq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  var params = 'id=' + id;\n  httpreq.send(params);\n  fetch('/list') //fetching shopping list from get('/list)\n  .then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    var list = data;\n    loadData('shopping-list', list.list); //invoke function, and pass shopping list \n  });\n};\n\nvar loadData = function loadData(shopping_list_name, list) {\n  //load data from server and attach it to HTML\n  var shopping_list = getElementById(shopping_list_name);\n  shopping_list.innerHTML = '';\n  setListLength(list.length);\n  var list_length = getElementById('list-length'); //length of the list with subcategory filtering. \n\n  list_length.innerText = \"d\\u0142ugo\\u015B\\u0107 listy:\".concat(list.length);\n  list.forEach(function (product, index) {\n    //list item styling\n    var shopping_item = createElement('article');\n    shopping_item.classList.add('shopping-list-element');\n    shopping_item.innerHTML = \"\\n        <label>\\n          Nazwa\\n          <p>\".concat(product.product_name, \"</p>\\n        </label>\\n        <label>\\n          Ilo\\u015B\\u0107/Waga\\n          <p>\").concat(product.product_amount).concat(product.kg == 'true' ? 'kg' : 'szt', \"</p>\\n        </label>\\n        <label>\\n          Kategoria\\n          <p>\").concat(product.product_select, \"</p>\\n        </label>\\n        <p class=\\\"delete-styling\\\" id=\").concat(product.id, \">\\n          &#xd7\\n        </p>\\n      \");\n    shopping_list.append(shopping_item);\n  });\n  querySelector('.center-shopping-list').querySelectorAll(\".shopping-list-element\").forEach(function (item) {\n    var detele = item.querySelector('.delete-styling');\n\n    detele.onclick = function () {\n      console.log(detele.id);\n      deteltePost(detele.id);\n    };\n  });\n};\n\nwindow.onload = function () {\n  fetch('/list').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    var arr = data;\n    var section = getElementById('section');\n    var header_article = getElementById('header-article');\n    arr.categories.forEach(function (item) {\n      //filtering categories\n      if (item != 'Wszystko') {\n        //adding categories to select, if item is different then 'wszystko' add it as option\n        var option = createElement('option');\n        option.text = item;\n        getElementById('product_select').add(option);\n      }\n\n      var p = createElement('p'); //creating headers\n\n      p.textContent = item;\n      p.classList.add(\"space-category-article\");\n\n      p.onclick = function () {\n        filterData(p.innerText);\n      };\n\n      appendChild(header_article, p); //append header to article and then to the section\n\n      section.prepend(header_article);\n      setListLength(arr.length); //set list lenght\n    });\n  });\n};\n\n(function readyJs(win, doc) {\n  'use strict';\n\n  var form = querySelector('#form');\n  var name = querySelector('#product_name');\n  var product_amount = querySelector('#product_amount');\n  var kg = getElementById('choice-1');\n  var szt = getElementById('choice-2');\n  var product_select = querySelector('#product_select');\n  var response = querySelector('.response'); //send to node js\n\n  function sendForm(event) {\n    event.preventDefault();\n    var httpreq = new XMLHttpRequest(); //params passed to express as req.body.[something]\n\n    var params = 'product_name=' + name.value + '&product_amount=' + product_amount.value + '&kg=' + kg.checked + '&szt=' + szt.checked + '&product_select=' + product_select.value;\n    httpreq.open('POST', '/cos');\n    httpreq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n\n    httpreq.onreadystatechange = function () {//if(httpreq.status === 200 & httpreq.readyState === 4){\n      //  console.log(httpreq.responseText)\n      //}\n    };\n\n    httpreq.send(params);\n  }\n\n  form.addEventListener('submit', sendForm, false);\n})(window, document);\n\nfunction observe_list_changes(event) {\n  //when form submited fetch new data\n  fetch('/list').then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    var list = data; //invoke function, and pass shopping list \n\n    loadData('shopping-list', list.list);\n  });\n} //if form submited call function \n\n\nvar form = querySelector('#form');\nform.addEventListener(\"submit\", observe_list_changes, false);\n\n//# sourceURL=webpack://rekrutacja-4/./src/js/index.js?");
/******/ })()
;